<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Calendar</title>
    <style>
      @font-face {
        font-family: "Dovemayo_gothic";
        src: url("https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.1/Dovemayo_gothic.woff2")
          format("woff2");
        font-weight: normal;
        font-style: normal;
      }
      body {
        font-family: "Dovemayo_gothic", "ë‹ì›€", sans-serif;
      }

      button {
        border: none;
      }

      #calendar {
        display: inline-block;
        padding: 20px;
        background: #ffc3da;
        text-align: center;
        color: hsl(0, 0%, 0%);
      }

      #calendar table {
        border-collapse: collapse;
      }

      caption {
        font-size: 25px;
        color: rgb(187, 0, 62);
        margin: 10px;
      }

      th,
      td {
        padding: 20px;
        border: 1px solid #ffffff;
        font-size: 20px;
      }

      th:first-child,
      td:first-child {
        color: red;
      }

      .prev,
      .next {
        color: inherit;
        padding: 10px;
        margin: 5px;
        background-color: #ff8daa;
        font-family: "Dovemayo_gothic", "ë‹ì›€", sans-serif;
        font-size: 17px;
        border-radius: 10px;
      }
    </style>
  </head>

  <body>
    <article id="calendar">
      <h2>ğŸ’—ë‚˜ì˜ HTML ë‹¬ë ¥ğŸ’—</h2>
      <table>
        <caption>
          <time datetime="">
            <!-- time ìš”ì†ŒëŠ” datetime í‘œê¸° í•„ìˆ˜  -->
            <span class="year"></span>ë…„ <span class="month"></span>ì›”
          </time>
        </caption>
        <tr>
          <th scope="col">ì¼</th>
          <th scope="col">ì›”</th>
          <th scope="col">í™”</th>
          <th scope="col">ìˆ˜</th>
          <th scope="col">ëª©</th>
          <th scope="col">ê¸ˆ</th>
          <th scope="col">í† </th>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
        </tr>
      </table>
      <button type="button" class="prev">ì´ì „ë‹¬</button>
      <button type="button" class="next">ë‹¤ìŒë‹¬</button>
    </article>

    <script>
      function calendar(newYear, newMonth) {
        // 1. ë¬´ìŠ¨ ìš”ì¼ì— ì‹œì‘í•˜ëŠ”ì§€ ì•Œì•„ì•¼ í•œë‹¤.
        const time = new Date(newYear, newMonth - 1, 1);

        // 2. í•´ë‹¹ ì›”ì— ë‚ ì´ ë©°ì¹ ì´ë‚˜ ìˆëŠ”ì§€ ì•Œì•„ì•¼ í•œë‹¤.
        // const timelength = 32 - new Date(newYear, newMonth - 1, 32).getDate();
        // í•´ë‹¹ ì›”ì˜ ë‚ ì§œë³´ë‹¤ ë” í° ì¼ìˆ˜(32)ë¥¼ ì…ë ¥í•´ì£¼ë©´ ë‹¤ìŒ ë‹¬ë¡œ ì¶œë ¥í•©ë‹ˆë‹¤. // May 2
        // 32 - 2 == 30 or 32 - 1 = 31

        const timelength = new Date(newYear, newMonth, 0).getDate();
        // í•´ë‹¹ ì›”ì˜ ë§ˆì§€ë§‰ ë‚ ì„ ì¶œë ¥í•©ë‹ˆë‹¤.
        // ì›”ì„ ì¸ë±ìŠ¤ë¡œ í‘œê¸°

        let year = time.getFullYear(),
          month = time.getMonth(),
          date = time.getDate(), // ë‚ ì§œ
          day = time.getDay(); // ìš”ì¼

        const captionYear = document.querySelector(".year"),
          captionMonth = document.querySelector(".month"),
          timeEl = document.querySelector("time"),
          days = document.querySelectorAll("tr td");

        for (let i = 0; i < days.length; i++) {
          days[i].innerHTML = "	&nbsp;";
          // HTML íŠ¹ìˆ˜ë¬¸ì ë¦¬ìŠ¤íŠ¸
          // http://kor.pe.kr/util/4/charmap2.htm
        }

        for (let i = day; i < day + timelength; i++) {
          // i = 6ì´ë©´ 6ë¶€í„° 35ê¹Œì§€ ë°˜ë³µí•©ë‹ˆë‹¤.
          days[i].textContent = date++;
        }

        captionYear.textContent = year;
        captionMonth.textContent = month + 1;
        timeEl.dateTime = `${year}-${month + 1}`;
      }

      const btns = document.querySelectorAll("button");
      btns.forEach((item) => {
        item.addEventListener("click", () => {
          if (item.classList.contains("prev")) {
            calendar(year, --month);
          } else {
            calendar(year, ++month);
          }
        });
      });

      let year = new Date().getFullYear(),
        month = new Date().getMonth() + 1, // getMonthëŠ” ë‹¬ì˜ ì¸ë±ìŠ¤ë¥¼ ë½‘ì•„ëƒ…ë‹ˆë‹¤. (0ë¶€í„° ì‹œì‘)
        date = new Date(),
        today = date.getDate(),
        cells = document.getElementsByTagName("td");

      for (let i = 0; i < cells.length; i++) {
        if (cells[i].textContent == today) {
          cells[i].style.backgroundColor = "yellow";
        }
      }

      calendar(year, month);
    </script>
  </body>
</html>
